# CScript

A strongly statically typed superset of C that transpiles to clean, readable C code.

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## Features

- **Immutable by Default** - Variables require `mut` keyword for mutability
- **Stricter Type System** - No implicit type conversions
- **Fixed-Width Types** - `int8`, `int16`, `int32`, `int64`, `uint8`, etc.
- **Boolean Type** - True `bool` type (not 0/1)
- **Option Types** - `Option<T>` for null-safe programming
- **Rich Error Messages** - Helpful compiler diagnostics with source context
- **C Compatible** - Use any C library, write normal C code

## Quick Start

### Build

```bash
cargo build --release
```

### Compile CScript to C

```bash
csc hello.csr           # Outputs hello.c
csc hello.csr -o out.c  # Custom output path
```

### Example

```c
// hello.csr
#include <stdio.h>

int main() {
    // Immutable by default
    int count = 5;
    
    // Mutable variable
    mut int i = 0;
    
    while (i < count) {
        printf("Hello, CScript! (%d)\n", i);
        i = i + 1;
    }
    
    return 0;
}
```

Compiles to:

```c
/* Generated by CScript Compiler */
#include <stdint.h>
#include <stdbool.h>
#include <stddef.h>

#include <stdio.h>

int main(void) {
    const int count = 5;
    int i = 0;
    while ((i < count)) {
        printf("Hello, CScript! (%d)\n", i);
        i = (i + 1);
    }
    return 0;
}
```

## Type System

| CScript Type | C Equivalent |
|--------------|--------------|
| `int8` | `int8_t` |
| `int16` | `int16_t` |
| `int32` | `int32_t` |
| `int64` | `int64_t` |
| `uint8` | `uint8_t` |
| `uint16` | `uint16_t` |
| `uint32` | `uint32_t` |
| `uint64` | `uint64_t` |
| `float32` | `float` |
| `float64` | `double` |
| `bool` | `_Bool` |

## Mutability

```c
int x = 10;       // Immutable - cannot reassign
mut int y = 20;   // Mutable - can reassign
y = 30;           // OK
// x = 15;        // ERROR: cannot assign to immutable variable
```

## CLI Options

```
csc [OPTIONS] <INPUT>

Arguments:
  <INPUT>  Input CScript file (.csr)

Options:
  -o, --output <OUTPUT>  Output C file (defaults to <input>.c)
      --bounds-checks    Emit runtime bounds checks
      --dump-ast         Print AST for debugging
      --dump-tokens      Print tokens for debugging
  -h, --help             Print help
  -V, --version          Print version
```

## Project Status

**MVP** - Core features implemented:
- [x] Lexer & Parser
- [x] Type Checker
- [x] C Code Generator
- [x] Immutability (`mut` keyword)
- [x] Fixed-width types
- [x] Boolean type
- [x] Structs & Enums
- [x] Rich error messages
- [x] Option types (partial)
- [ ] Struct field type resolution

## License

MIT License - See [LICENSE](LICENSE) for details.
